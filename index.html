<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <div class="canvascontent">
        <canvas id="ECG_L1" width="1000" height="85" class="echartsbody"></canvas>
    </div>
    <style>
        .canvascontent {
            /* width: 200px; */
            height: 200px;
        }
    </style>
</head>

<body>
    <script>
        var EcgData = [26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
            26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 34, 34, 38, 50, 58, 62, 66, 70, 78, 82, 82, 82, 78, 70, 66, 62, 58, 50, 42, 34, 26, 26,
            26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 22, 14, 6, -2, -2, 34, 94, 154, 186, 242, 298, 322, 266, 210, 146, 90, 34, -14, -10,
            -2, 6, 18, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 34, 42, 42, 50, 58, 62,
            70, 78, 82, 86, 94, 102, 106, 106, 106, 114, 114, 122, 122, 126, 130, 130, 130, 130, 122, 122, 114, 114, 106, 106, 90, 90, 90, 82, 70, 62, 58, 50, 38, 34, 30, 26, 26, 26,
            26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
            26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
            26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
            26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 34, 34, 42, 58, 58, 66, 66, 74, 78, 82, 82, 82,
            74, 66, 66, 58, 58, 42, 42, 34, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 18, 10, 2, -6, 2, 34, 94, 154, 214, 270, 310,
            294, 238, 178, 118, 90, 34, -14, -6, 2, 10, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
            26, 26, 26, 34, 42, 42, 58, 58, 66, 74, 82, 82, 86, 94, 102, 106, 106, 110, 114, 118, 122, 122, 126, 130, 130, 130, 126, 122, 118, 114, 110, 106, 106, 90, 90, 90, 74, 66,
            58, 58, 42, 34, 34, 30, 26, 106, 90, 90, 90, 74, 66, 58, 58, 50, 38, 34, 30, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
            26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
            26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
            26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 34, 34, 38, 50, 58, 62, 66, 70, 78, 82, 82, 82, 78, 70, 66, 62, 58, 50, 42, 34, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
            26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 22, 14, 6, -2, -2, 34, 94, 154, 214, 242, 298, 322, 266, 210, 146, 90, 34, -14, -6, -2, 6, 18, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
            26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 34, 42, 42, 50, 58, 62, 70, 78, 82, 86, 94, 102, 106, 106, 106, 114]
        var x = 0
        function drawline() {
            let chartoid = "ECG_L1"
            let canvas = document.getElementById(chartoid)
            var ctx = canvas.getContext('2d')
            ctx.strokeStyle = "#e0514b";
            ctx.lineWidth = 1;
            let timeout = setInterval(() => {
                ctx.clearRect(x / 1.64, 0, 25, 750);//橡皮擦
                x = x + 1
                let num = mapValueToRange(EcgData[x])
                console.log(num, (-num + 150) / 2)
                ctx.lineTo(x / 1.64, (-num + 150) / 2)//绘制路径
                ctx.stroke();
                if (x > 750) {
                    x = 0
                    ctx.beginPath();
                }
            }, 5)
            ctx.stroke();
            ctx.closePath();
        }
        //使返回值在0-85之间
        function mapValueToRange(x) {
            // 原始范围 [-20, 310]
            const originalMin = -20;
            const originalRange = 310 - originalMin; // 330
            // 目标范围 [0, 85]
            const targetMin = 0;
            const targetRange = 85;
            // 计算映射后的值
            const y = ((x - originalMin) / originalRange) * targetRange + targetMin;
            // 确保结果是一个整数（如果需要）
            return Math.round(y);
        }
        drawline()
    </script>
</body>

</html>
